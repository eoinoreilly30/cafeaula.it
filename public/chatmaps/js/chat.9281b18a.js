(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chat"],{"0861":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("welcome-dialog"),i("call-dialog"),i("receive-dialog"),i("map-view")],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100vh"},attrs:{id:"map"}})},s=[],c=(i("d81d"),i("fb6a"),i("ac1f"),i("1276"),i("3835")),r=i("5530"),l=i("2f62"),h={name:"MapView",computed:Object(r["a"])({},Object(l["c"])(["peers","position"])),data:function(){return{map:null}},watch:{position:function(){var t=this.position.coords.latitude,e=this.position.coords.longitude;this.map.setView([t,e],6),L.marker([t,e]).addTo(this.map).bindTooltip("This you!",{direction:"top"})},peers:function(){var t=this;this.peers.map((function(e){var i=e.substr(1).slice(0,-1).replaceAll("p",".").split("x"),n=Object(c["a"])(i,2),o=n[0],a=n[1],s=L.circleMarker([o,a],{color:"black",fillColor:"#ff00ff",weight:1,fillOpacity:1,radius:12,id:e}).addTo(t.map);s.on("click",(function(){t.connectCall(e)})),s.bindTooltip("Click to call",{direction:"top"})}))}},mounted:function(){this.map=L.map("map").setView([51,0],4),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZW9pbm9yZWlsbHkzMCIsImEiOiJja2p5emVhbmcwMml1MnN0Zzdqd2p2cGU5In0.AciktlS6oKhpDWlJlyBDoA",{maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(this.map)},methods:Object(r["a"])({},Object(l["b"])(["connectCall"]))},d=h,u=i("2877"),f=Object(u["a"])(d,a,s,!1,null,null,null),p=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{staticStyle:{"z-index":"1000 !important"},attrs:{persistent:"","max-width":"400px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{rounded:""}},[i("v-card-title",{staticClass:"justify-center"},[t._v(" Welcome! ")]),i("v-card-text",{staticClass:"justify-center text-center"},[t._v(" ChatMaps is the revolutionary state of the art decentralized peer to peer chatting app! ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"success"},on:{click:t.getLocation}},[t._v(" Lets go! ")])],1)],1)],1)},g=[],m={name:"WelcomeDialog",data:function(){return{dialog:!1}},mounted:function(){var t=this;setTimeout((function(){t.dialog=!0}),1e3)},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["popupDialog"])),{},{getLocation:function(){var t=this;this.dialog=!1,navigator.geolocation.getCurrentPosition((function(e){t.$store.commit("position",e),t.$store.dispatch("connectPeerServer",[e.coords.latitude,e.coords.longitude])}),(function(){t.popupDialog({title:"Location Permission",text:"Please enable location access to use this app"})}))}})},b=m,x=i("6544"),w=i.n(x),O=i("8336"),y=i("b0af"),C=i("99d9"),S=i("169a"),k=i("2fa4"),T=Object(u["a"])(b,v,g,!1,null,"13356e7f",null),j=T.exports;w()(T,{VBtn:O["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VDialog:S["a"],VSpacer:k["a"]});var _,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{staticStyle:{"z-index":"1000 !important"},attrs:{"max-width":"400px",persistent:""},model:{value:t.callDialog,callback:function(e){t.callDialog=e},expression:"callDialog"}},[i("v-card",{attrs:{rounded:""}},[i("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(t.callLoading?"Calling...":"Connected")+" ")]),i("v-card-text",{staticClass:"text-center text-body-1"},[t.callLoading?i("v-btn",{attrs:{"x-large":"",icon:"",loading:""}}):i("span",[t._v("You are talking to ...")])],1),i("v-card-actions",[i("v-spacer"),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",color:"red"}},"v-btn",o,!1),n),[i("v-icon",[t._v("mdi-phone-hangup")])],1)]}}])},[i("span",[t._v("Hangup")])])],1)],1)],1)},A=[],I={name:"CallDialog",computed:Object(r["a"])({},Object(l["c"])(["callDialog","callLoading"]))},W=I,V=(i("7db0"),i("caad"),i("c975"),i("45fc"),i("a9e3"),i("2532"),i("498a"),i("c96a"),i("4804"),i("7e2b")),B=i("a9ad"),z=i("af2b"),Y=i("7560"),M=i("80d2"),$=i("2b0e"),N=i("58df");function F(t){return["fas","far","fal","fab","fad"].some((function(e){return t.includes(e)}))}function P(t){return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4}(function(t){t["xSmall"]="12px",t["small"]="16px",t["default"]="24px",t["medium"]="28px",t["large"]="36px",t["xLarge"]="40px"})(_||(_={}));var X=Object(N["a"])(V["a"],B["a"],z["a"],Y["a"]).extend({name:"v-icon",props:{dense:Boolean,disabled:Boolean,left:Boolean,right:Boolean,size:[Number,String],tag:{type:String,required:!1,default:"i"}},computed:{medium:function(){return!1},hasClickListener:function(){return Boolean(this.listeners$.click||this.listeners$["!click"])}},methods:{getIcon:function(){var t="";return this.$slots.default&&(t=this.$slots.default[0].text.trim()),Object(M["r"])(this,t)},getSize:function(){var t={xSmall:this.xSmall,small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},e=Object(M["o"])(t).find((function(e){return t[e]}));return e&&_[e]||Object(M["f"])(this.size)},getDefaultData:function(){return{staticClass:"v-icon notranslate",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.hasClickListener,"v-icon--right":this.right,"v-icon--dense":this.dense},attrs:Object(r["a"])({"aria-hidden":!this.hasClickListener,disabled:this.hasClickListener&&this.disabled,type:this.hasClickListener?"button":void 0},this.attrs$),on:this.listeners$}},getSvgWrapperData:function(){var t=this.getSize(),e=Object(r["a"])(Object(r["a"])({},this.getDefaultData()),{},{style:t?{fontSize:t,height:t,width:t}:void 0});return this.applyColors(e),e},applyColors:function(t){t.class=Object(r["a"])(Object(r["a"])({},t.class),this.themeClasses),this.setTextColor(this.color,t)},renderFontIcon:function(t,e){var i=[],n=this.getDefaultData(),o="material-icons",a=t.indexOf("-"),s=a<=-1;s?i.push(t):(o=t.slice(0,a),F(o)&&(o="")),n.class[o]=!0,n.class[t]=!s;var c=this.getSize();return c&&(n.style={fontSize:c}),this.applyColors(n),e(this.hasClickListener?"button":this.tag,n,i)},renderSvgIcon:function(t,e){var i={class:"v-icon__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":!0}},n=this.getSize();return n&&(i.style={fontSize:n,height:n,width:n}),e(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[e("svg",i,[e("path",{attrs:{d:t}})])])},renderSvgIconComponent:function(t,e){var i={class:{"v-icon__component":!0}},n=this.getSize();n&&(i.style={fontSize:n,height:n,width:n}),this.applyColors(i);var o=t.component;return i.props=t.props,i.nativeOn=i.on,e(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[e(o,i)])}},render:function(t){var e=this.getIcon();return"string"===typeof e?P(e)?this.renderSvgIcon(e,t):this.renderFontIcon(e,t):this.renderSvgIconComponent(e,t)}}),H=$["a"].extend({name:"v-icon",$_wrapperFor:X,functional:!0,render:function(t,e){var i=e.data,n=e.children,o="";return i.domProps&&(o=i.domProps.textContent||i.domProps.innerHTML||o,delete i.domProps.textContent,delete i.domProps.innerHTML),t(X,i,o?[o]:n)}}),E=i("ade3"),R=(i("9734"),i("4ad4")),q=i("16b7"),J=i("b848"),Z=i("75eb"),G=(i("d3b7"),i("fe6c")),K=i("21be"),U=Object(N["a"])(K["a"],G["a"],R["a"]),Q=U.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,openOnClick:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:function(){return{absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}},computed:{computedLeft:function(){var t=this.dimensions.activator,e=this.dimensions.content,i=(!1!==this.attach?t.offsetLeft:t.left)||0,n=Math.max(t.width,e.width),o=0;if(o+=this.left?i-(n-t.width):i,this.offsetX){var a=isNaN(Number(this.maxWidth))?t.width:Math.min(t.width,Number(this.maxWidth));o+=this.left?-a:t.width}return this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),o},computedTop:function(){var t=this.dimensions.activator,e=this.dimensions.content,i=0;return this.top&&(i+=t.height-e.height),!1!==this.attach?i+=t.offsetTop:i+=t.top+this.pageYOffset,this.offsetY&&(i+=this.top?-t.height:t.height),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),i},hasActivator:function(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator}},watch:{disabled:function(t){t&&this.callDeactivate()},isActive:function(t){this.disabled||(t?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount:function(){this.hasWindow="undefined"!==typeof window},methods:{absolutePosition:function(){return{offsetTop:0,offsetLeft:0,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate:function(){},calcLeft:function(t){return Object(M["f"])(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,t))},calcTop:function(){return Object(M["f"])(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow:function(t,e){var i=t+e-this.pageWidth+12;return t=(!this.left||this.right)&&i>0?Math.max(t-i,0):Math.max(t,12),t+this.getOffsetLeft()},calcYOverflow:function(t){var e=this.getInnerHeight(),i=this.pageYOffset+e,n=this.dimensions.activator,o=this.dimensions.content.height,a=t+o,s=i<a;return s&&this.offsetOverflow&&n.top>o?t=this.pageYOffset+(n.top-o):s&&!this.allowOverflow?t=i-o-12:t<this.pageYOffset&&!this.allowOverflow&&(t=this.pageYOffset+12),t<12?12:t},callActivate:function(){this.hasWindow&&this.activate()},callDeactivate:function(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset:function(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed:function(){if(!1===this.attach){var t=this.getActivator();while(t){if("fixed"===window.getComputedStyle(t).position)return void(this.activatorFixed=!0);t=t.offsetParent}this.activatorFixed=!1}},deactivate:function(){},genActivatorListeners:function(){var t=this,e=R["a"].options.methods.genActivatorListeners.call(this),i=e.click;return e.click=function(e){t.openOnClick&&i&&i(e),t.absoluteX=e.clientX,t.absoluteY=e.clientY},e},getInnerHeight:function(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft:function(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop:function(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect:function(t){var e=t.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left),bottom:Math.round(e.bottom),right:Math.round(e.right),width:Math.round(e.width),height:Math.round(e.height)}},measure:function(t){if(!t||!this.hasWindow)return null;var e=this.getRoundedBoundedClientRect(t);if(!1!==this.attach){var i=window.getComputedStyle(t);e.left=parseInt(i.marginLeft),e.top=parseInt(i.marginTop)}return e},sneakPeek:function(t){var e=this;requestAnimationFrame((function(){var i=e.$refs.content;i&&"none"===i.style.display?(i.style.display="inline-block",t(),i.style.display="none"):t()}))},startTransition:function(){var t=this;return new Promise((function(e){return requestAnimationFrame((function(){t.isContentActive=t.hasJustFocused=t.isActive,e()}))}))},updateDimensions:function(){var t=this;this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;var e={activator:Object(r["a"])({},this.dimensions.activator),content:Object(r["a"])({},this.dimensions.content)};if(!this.hasActivator||this.absolute)e.activator=this.absolutePosition();else{var i=this.getActivator();if(!i)return;e.activator=this.measure(i),e.activator.offsetLeft=i.offsetLeft,!1!==this.attach?e.activator.offsetTop=i.offsetTop:e.activator.offsetTop=0}this.sneakPeek((function(){t.$refs.content&&(e.content=t.measure(t.$refs.content)),t.dimensions=e}))}}}),tt=i("f2e7"),et=i("d9bd"),it=Object(N["a"])(B["a"],q["a"],J["a"],Z["a"],Q,tt["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!this.bottom&&!this.left&&!this.top&&!this.right,o=!1!==this.attach?e.offsetLeft:e.left,a=0;return this.top||this.bottom||n?a=o+e.width/2-i.width/2:(this.left||this.right)&&(a=o+(this.right?e.width:-i.width)+(this.right?10:-10)),this.nudgeLeft&&(a-=parseInt(this.nudgeLeft)),this.nudgeRight&&(a+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(a,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!1!==this.attach?e.offsetTop:e.top,o=0;return this.top||this.bottom?o=n+(this.bottom?e.height:-i.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=n+e.height/2-i.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(o+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(M["f"])(this.maxWidth),minWidth:Object(M["f"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(M["l"])(this,"activator",!0)&&Object(et["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=R["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===M["n"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(E["a"])(t,this.contentClass,!0),Object(E["a"])(t,"menuable__content__active",this.isActive),Object(E["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}}),nt=Object(u["a"])(W,D,A,!1,null,"25668a08",null),ot=nt.exports;w()(nt,{VBtn:O["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VDialog:S["a"],VIcon:H,VSpacer:k["a"],VTooltip:it});var at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{staticStyle:{"z-index":"1000 !important"},attrs:{"max-width":"400px",persistent:""},model:{value:t.receiveDialog,callback:function(e){t.receiveDialog=e},expression:"receiveDialog"}},[i("v-card",{attrs:{rounded:""}},[i("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(t.receiveLoading?"Incoming call":"Connected")+" ")]),i("v-card-text",{staticClass:"text-center text-body-1"},[t._v(" You are talking to ... ")]),i("v-card-actions",[i("v-spacer"),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",color:"red"}},"v-btn",o,!1),n),[i("v-icon",[t._v("mdi-phone-hangup")])],1)]}}])},[i("span",[t._v("Hangup")])])],1)],1)],1)},st=[],ct={name:"ReceiveDialog",computed:Object(r["a"])({},Object(l["c"])(["receiveDialog","receiveLoading"]))},rt=ct,lt=Object(u["a"])(rt,at,st,!1,null,"52ba409f",null),ht=lt.exports;w()(lt,{VBtn:O["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VDialog:S["a"],VIcon:H,VSpacer:k["a"],VTooltip:it});var dt={name:"Home",components:{ReceiveDialog:ht,CallDialog:ot,WelcomeDialog:j,MapView:p}},ut=dt,ft=Object(u["a"])(ut,n,o,!1,null,"2c1b3a34",null);e["default"]=ft.exports},4804:function(t,e,i){},9734:function(t,e,i){}}]);
//# sourceMappingURL=chat.9281b18a.js.map