(function(e){function t(t){for(var r,a,c=t[0],u=t[1],s=t[2],l=0,p=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return u.p+"js/"+({chat:"chat"}[e]||e)+"."+{chat:"9281b18a"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={chat:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({chat:"chat"}[e]||e)+"."+{chat:"ba878526"}[e]+".css",o=u.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var s=i[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){s=p[c],l=s.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e);var p=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var p=0;p<s.length;p++)t(s[p]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2868:function(e,t,n){"use strict";n("e00d")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view"),n("popup-dialog")],1)},o=[],i=n("5530"),c=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{staticStyle:{"z-index":"1000 !important"},attrs:{"max-width":"400px"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[n("v-card",[n("v-card-title",[e._v(" "+e._s(e.popupDialog.title)+" ")]),n("v-card-text",[e._v(" "+e._s(e.popupDialog.text)+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"success"},on:{click:function(t){e.status=!1}}},[e._v(" Ok ")])],1)],1)],1)},s=[],l={name:"PopupDialog",computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])(["popupDialog"])),{},{status:{get:function(){return this.$store.state.Dialog.popupDialog.status},set:function(){this.$store.commit("popupDialogStatus")}}})},p=l,f=n("2877"),d=n("6544"),g=n.n(d),m=n("8336"),h=n("b0af"),v=n("99d9"),b=n("169a"),y=n("2fa4"),w=Object(f["a"])(p,u,s,!1,null,"a52dc540",null),D=w.exports;g()(w,{VBtn:m["a"],VCard:h["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VDialog:b["a"],VSpacer:y["a"]});var O={name:"App",components:{PopupDialog:D},beforeDestroy:function(){this.destroy()},methods:Object(i["a"])({},Object(c["b"])(["destroy"]))},x=O,j=(n("2868"),n("7496")),k=Object(f["a"])(x,a,o,!1,null,null,null),_=k.exports;g()(k,{VApp:j["a"]});var P=n("f309");r["a"].use(P["a"]);var S=new P["a"]({}),C=n("bc3a"),E=n.n(C),L=n("2106"),I=n.n(L),A=(n("99af"),n("4de4"),n("3835")),R=(n("96cf"),n("1da1")),T=n("a0bc"),M=n.n(T),V=null;function B(e){return N.apply(this,arguments)}function N(){return N=Object(R["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=document.createElement("audio"),n.srcObject=t,n.onloadedmetadata=function(){console.log("call received"),n.play()};case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function $(){return U.apply(this,arguments)}function U(){return U=Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,re.dispatch("popupDialog",{title:"Mic Permission",text:"Please enable microphone access. You might have to go into your settings"});case 10:console.log("error");case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),U.apply(this,arguments)}var q={myId:"",peers:[],callDialog:!1,callLoading:!1,receiveDialog:!1,receiveLoading:!1},z={myId:function(e){return e.myId},peers:function(e){return e.peers},callDialog:function(e){return e.callDialog},callLoading:function(e){return e.callLoading},receiveDialog:function(e){return e.receiveDialog},receiveLoading:function(e){return e.receiveLoading}},G={connectPeerServer:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.commit,a=e.dispatch,o=Object(A["a"])(t,2),i=o[0],c=o[1],u="x".concat(i,"x").concat(c,"x").replaceAll(".","p"),V=new M.a(u,{host:"api.chatmaps.art",port:9e3,secure:!0}),V.on("open",(function(e){r("myId",e),setInterval((function(){a("getPeers")}),2e3)})),V.on("call",(function(e){r("receiveDialog",!0),console.log("received call"),$().then((function(t){e.answer(t)})),e.on("stream",(function(e){B(e)}))}));case 6:case"end":return n.stop()}}),n)})))()},connectCall:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.commit,r("callDialog",!0),r("callLoading",!0),$().then((function(e){console.log("connect",e),V.call(t,e).on("stream",(function(e){console.log("connecting"),B(e),r("callLoading",!1)}))}));case 4:case"end":return n.stop()}}),n)})))()},destroy:function(){return Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:V.destroy();case 1:case"end":return e.stop()}}),e)})))()},getPeers:function(e){return Object(R["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,E.a.get("https://".concat("api.chatmaps.art",":9000/peerjs/peers"));case 3:r=t.sent,a=r.data,n("peers",a);case 6:case"end":return t.stop()}}),t)})))()}},K={myId:function(e,t){e.myId=t},peers:function(e,t){e.peers=t.filter((function(t){return t!==e.myId}))},callDialog:function(e,t){e.callDialog=t},callLoading:function(e,t){e.callLoading=t},receiveDialog:function(e,t){e.receiveDialog=t}},F={state:q,getters:z,actions:G,mutations:K},J={position:{}},H={position:function(e){return e.position}},Y={},Z={position:function(e,t){e.position=t}},Q={state:J,getters:H,actions:Y,mutations:Z},W={popupDialog:{status:null,title:null,text:null}},X={popupDialog:function(e){return e.popupDialog}},ee={popupDialog:function(e,t){var n=e.commit;n("popupDialog",t)}},te={popupDialog:function(e,t){e.popupDialog.status=!0,e.popupDialog=Object.assign(e.popupDialog,t)},popupDialogStatus:function(e){e.popupDialog.status=null,e.popupDialog.title=null,e.popupDialog.text=null}},ne={state:W,getters:X,actions:ee,mutations:te};r["a"].use(c["a"]);var re=new c["a"].Store({strict:!0,modules:{Chat:F,Map:Q,Dialog:ne}}),ae=n("260b"),oe=n("000b"),ie=n("8c4f"),ce=(n("d3b7"),[{path:"",name:"home",component:function(){return n.e("chat").then(n.bind(null,"0861"))}}]),ue=new ie["a"]({routes:ce,linkActiveClass:"active",mode:"history"});r["a"].config.productionTip=!0,r["a"].use(I.a,E.a),r["a"].use(ie["a"]);var se={apiKey:"AIzaSyCSq-PtGMnD4TAiSyPwcSPzBTK8ZomIs_k",authDomain:"chat-maps-b5abd.firebaseapp.com",projectId:"chat-maps-b5abd",storageBucket:"chat-maps-b5abd.appspot.com",messagingSenderId:"841386432156",appId:"1:841386432156:web:19a0a9cd56c2b7af837f59",measurementId:"G-MGDBER07EM"},le=Object(ae["a"])(se);Object(oe["a"])(le),new r["a"]({vuetify:S,store:re,router:ue,render:function(e){return e(_)}}).$mount("#app")},"5e11":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="5e11"},e00d:function(e,t,n){}});
//# sourceMappingURL=app.8079ca07.js.map